{"version":3,"sources":["index.js","../node_modules/express/lib sync","../node_modules/engine.io/lib sync","../node_modules/socket.io/lib sync","ws/stream.js"],"names":["express","require","app","server","Server","io","stream","path","favicon","use","join","__dirname","static","get","req","res","sendFile","console","log","of","on","listen","webpackEmptyContext","e","Error","code","keys","resolve","module","exports","id","socket","data","room","socketId","adapter","rooms","length","to","emit","sender","description","candidate","msg","name"],"mappings":"kHAAA,gBAAIA,EAAUC,EAAQ,KAClBC,EAAMF,IACNG,EAASF,EAAQ,IAAQG,OAAOF,GAChCG,EAAKJ,EAAQ,IAARA,CAAqBE,GAC1BG,EAASL,EAAQ,KACjBM,EAAON,EAAQ,GACfO,EAAUP,EAAQ,KAEtBC,EAAIO,IAAID,EAAQD,EAAKG,KAAKC,EAAW,iBACrCT,EAAIO,IAAI,UAAWT,EAAQY,OAAOL,EAAKG,KAAKC,EAAW,YAEvDT,EAAIW,IAAI,KAAK,SAACC,EAAKC,GACjBA,EAAIC,SAASL,EAAY,eACzBM,QAAQC,IAAI,iBAGdb,EAAGc,GAAG,WAAWC,GAAG,aAAcd,GAElCH,EAAOkB,OAAO,O,sIClBd,SAASC,EAAoBR,GAC5B,IAAIS,EAAI,IAAIC,MAAM,uBAAyBV,EAAM,KAEjD,MADAS,EAAEE,KAAO,mBACHF,EAEPD,EAAoBI,KAAO,WAAa,MAAO,IAC/CJ,EAAoBK,QAAUL,EAC9BM,EAAOC,QAAUP,EACjBA,EAAoBQ,GAAK,K,kQCRzB,SAASR,EAAoBR,GAC5B,IAAIS,EAAI,IAAIC,MAAM,uBAAyBV,EAAM,KAEjD,MADAS,EAAEE,KAAO,mBACHF,EAEPD,EAAoBI,KAAO,WAAa,MAAO,IAC/CJ,EAAoBK,QAAUL,EAC9BM,EAAOC,QAAUP,EACjBA,EAAoBQ,GAAK,K,kBCRzB,SAASR,EAAoBR,GAC5B,IAAIS,EAAI,IAAIC,MAAM,uBAAyBV,EAAM,KAEjD,MADAS,EAAEE,KAAO,mBACHF,EAEPD,EAAoBI,KAAO,WAAa,MAAO,IAC/CJ,EAAoBK,QAAUL,EAC9BM,EAAOC,QAAUP,EACjBA,EAAoBQ,GAAK,K,kBCoCzBF,EAAOC,QA5CQ,SAAEE,GACbA,EAAOX,GAAI,aAAa,SAAEY,GAEtBD,EAAOrB,KAAMsB,EAAKC,MAClBF,EAAOrB,KAAMsB,EAAKE,UAGbH,EAAOI,QAAQC,MAAMJ,EAAKC,MAAMI,OAAS,GAC1CN,EAAOO,GAAIN,EAAKC,MAAOM,KAAM,WAAY,CAAEL,SAAUF,EAAKE,cAKlEH,EAAOX,GAAI,gBAAgB,SAAEY,GACzBD,EAAOO,GAAIN,EAAKM,IAAKC,KAAM,eAAgB,CAAEC,OAAQR,EAAKQ,YAI9DT,EAAOX,GAAI,OAAO,SAAEY,GAChBD,EAAOO,GAAIN,EAAKM,IAAKC,KAAM,MAAO,CAAEE,YAAaT,EAAKS,YAAaD,OAAQR,EAAKQ,YAIpFT,EAAOX,GAAI,kBAAkB,SAAEY,GAC3BD,EAAOO,GAAIN,EAAKM,IAAKC,KAAM,iBAAkB,CAAEG,UAAWV,EAAKU,UAAWF,OAAQR,EAAKQ,YAI3FT,EAAOX,GAAI,QAAQ,SAAEY,GACjBD,EAAOO,GAAIN,EAAKC,MAAOM,KAAM,OAAQ,CAAEC,OAAQR,EAAKQ,OAAQG,IAAKX,EAAKW,SAG1EZ,EAAOX,GAAI,WAAW,SAAEY,GACpBD,EAAOO,GAAIN,EAAKC,MAAOM,KAAM,UAAW,CAAEC,OAAQR,EAAKQ,OAAQG,IAAKX,EAAKW,SAG7EZ,EAAOX,GAAG,iBAAgB,SAASY,GAEvBA,EAAKF,GACHE,EAAKY,W","file":"static/js/main.e1d78b5f.chunk.js","sourcesContent":["let express = require(\"express\");\nlet app = express();\nlet server = require(\"http\").Server(app);\nlet io = require(\"socket.io\")(server);\nlet stream = require(\"./ws/stream\");\nlet path = require(\"path\");\nlet favicon = require(\"serve-favicon\");\n\napp.use(favicon(path.join(__dirname, \"favicon.ico\")));\napp.use(\"/assets\", express.static(path.join(__dirname, \"assets\")));\n\napp.get(\"/\", (req, res) => {\n  res.sendFile(__dirname + \"/index.html\");\n  console.log(\"start succ\");\n});\n\nio.of(\"/stream\").on(\"connection\", stream);\n\nserver.listen(3000);\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 244;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 372;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 395;","const stream = ( socket ) => {\n    socket.on( 'subscribe', ( data ) => {\n        //subscribe/join a room\n        socket.join( data.room );\n        socket.join( data.socketId );\n\n        //Inform other members in the room of new user's arrival\n        if ( socket.adapter.rooms[data.room].length > 1 ) {\n            socket.to( data.room ).emit( 'new user', { socketId: data.socketId } );\n        }\n    } );\n\n\n    socket.on( 'newUserStart', ( data ) => {\n        socket.to( data.to ).emit( 'newUserStart', { sender: data.sender } );\n    } );\n\n\n    socket.on( 'sdp', ( data ) => {\n        socket.to( data.to ).emit( 'sdp', { description: data.description, sender: data.sender } );\n    } );\n\n\n    socket.on( 'ice candidates', ( data ) => {\n        socket.to( data.to ).emit( 'ice candidates', { candidate: data.candidate, sender: data.sender } );\n    } );\n\n\n    socket.on( 'chat', ( data ) => {\n        socket.to( data.room ).emit( 'chat', { sender: data.sender, msg: data.msg } );\n    } );\n    \n    socket.on( 'setname', ( data ) => {\n        socket.to( data.room ).emit( 'setname', { sender: data.sender, msg: data.msg } );\n    } );\n     \n    socket.on('eventToClient',function(data) {\n    // do something with data\n       var id = data.id\n       var name = data.name // here, it should be data.name instead of data.username\n\n });\n};\n\nmodule.exports = stream;\n"],"sourceRoot":""}